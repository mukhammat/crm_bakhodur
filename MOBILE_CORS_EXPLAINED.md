# üì± CORS –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç CORS —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏

### –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:

**–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (APK) –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç CORS —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä—ã!**

### –†–∞–∑–Ω–∏—Ü–∞:

1. **–í–µ–±-–±—Ä–∞—É–∑–µ—Ä:**
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Origin: http://example.com`
   - –ë—Ä–∞—É–∑–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç CORS –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞
   - –ï—Å–ª–∏ CORS –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω - –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å

2. **–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (APK):**
   - **–ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç** –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Origin` (–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `null`)
   - CORS –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –Ω–æ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–æ –∑–∞–ø—Ä–æ—Å
   - –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ origin - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (–ü–†–ê–í–ò–õ–¨–ù–û–ï):

```typescript
origin: (origin) => {
    // –ï—Å–ª–∏ origin –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ null - —ç—Ç–æ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    if (!origin || origin === 'null' || origin === 'file://') {
        return '*'; // –†–∞–∑—Ä–µ—à–∞–µ–º –í–°–ï –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    }
    // –î–ª—è –≤–µ–± –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–∏—Å–æ–∫
    // ...
}
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- ‚úÖ –í—Å–µ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –í—Å–µ iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å IP –∞–¥—Ä–µ—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

---

## –ü–æ—á–µ–º—É —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ?

1. **–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - —ç—Ç–æ –Ω–µ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä—ã
   - –û–Ω–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã —Å–ª—É—á–∞–π–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å APK
   - –ó–∞—â–∏—Ç–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

2. **–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –∑–∞—â–∏—â–µ–Ω—ã —Å–ø–∏—Å–∫–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö origins
   - –¢–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã –º–æ–≥—É—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
   - –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF –∞—Ç–∞–∫

---

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

–ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ù–ï –≤ CORS, –∞ –≤:

### 1. Android –±–ª–æ–∫–∏—Ä—É–µ—Ç HTTP (—Ç—Ä–µ–±—É–µ—Ç HTTPS)

–ù–∞—á–∏–Ω–∞—è —Å Android 9, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è HTTP –∑–∞–ø—Ä–æ—Å—ã.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `AndroidManifest.xml`:
```xml
<application
    android:usesCleartextTraffic="true"
    ...>
```

–ù–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS –¥–ª—è production!

### 2. –§–∞–π—Ä–≤–æ–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 3322 –æ—Ç–∫—Ä—ã—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw status
sudo ufw allow 3322
```

### 3. –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:
```
http://45.63.43.62:3322/api/auth/login
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –≤–º–µ—Å—Ç–æ HTTP
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω** –≤–º–µ—Å—Ç–æ IP –∞–¥—Ä–µ—Å–∞
3. **–î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** –Ω–∞ —É—Ä–æ–≤–Ω–µ API (—É–∂–µ –µ—Å—Ç—å JWT)
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ rate limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DDoS

---

## –ò—Ç–æ–≥

**–¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è!** –û–Ω–∞ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—Å–µ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç IP –∞–¥—Ä–µ—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–æ–±–ª–µ–º–∞ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤:
- Android –±–ª–æ–∫–∏—Ä—É–µ—Ç HTTP (–Ω—É–∂–µ–Ω HTTPS –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- –§–∞–π—Ä–≤–æ–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç
- –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

